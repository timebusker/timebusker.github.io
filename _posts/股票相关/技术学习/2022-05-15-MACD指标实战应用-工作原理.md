---
layout:     post
title:      MACD指标实战应用(一)-工作原理
date:       2022-05-25
author:     timebusker
header-img: img/home-bg.jpg
catalog: true
tags:
    - 股票技术篇
---  

>### [原文](https://zhuanlan.zhihu.com/p/384268548)


### 工作原理
##### MACD指标的构成
MACD指标，全名叫做平滑异同平均线，是由一根`快线`、一根`慢线`、一根`0轴线`和`无数根柱状线`组成，这些指标的元素，0轴一般不显示出来，而其他元素在不同的炒股软件中，其名称略有不同。通达信中，快线是DIF，慢线是DEA，柱状线是MACD，`同花顺中，快线变成了DIFF`，而比较小众的炒股软件中，比如钱龙软件，MACD指标的快线是DIF，慢线是MACD，柱状线是DIF-MACD，且公式也有所变化。为了后文讲解方便，我们就以同花顺的MACD指标为准，且因为柱状线MACD与指标同名，所以下文我们称它为红绿柱状线或者BAR。
![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_1.png)  

##### MACD指标的工作原理
熟悉我的朋友，都知道，我不只是说方法的，对于指标来说，虽然实际应用很重要，但搞清楚原理，我认为更重要，所以本着知其然，更要知其所以然的原则，我们必须要对于MACD指标的公式进行拆解，搞清楚它到底是怎么工作的，又为什么这样工作？
![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_2.png)  

如上图所示，MACD指标的公式非常简单，只有3个参数和3行代码。按照默认参数来说，快线DIF是`12日`的指数移动平均与`26日`的指数移动平均的`差离值`，慢线DEA是`9日`DIF的指数移动平均，而柱状线则是DIF与DEA差值的两倍。

首先，相对来说K线是比较杂乱无章的，所以先要进行均值处理，得到12和26日的两条指数移动平均线，均线的优点是稳定的，但缺点是滞后，如何去解决这个问题呢？
那么就到了其次，对着两条均线进行差值处理，就得到了均线差DIF，这个差离值可以快速反映两条均线的关系，所以它同时满足了稳定和速度。
再次，我们对DIF这个均值差，再一次进行均值处理，就得到了DEA，这时DIF可以看成是DIF的1日均线，DEA可以看成DIF的9日均线。
最后，我们再对DIF和DEA这两条均线进行差值处理，就得到了柱状线BAR。

![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_3.png)  

从整个过程来看，从K线到12和26日均线，是为了求稳；再从均线到均线差DIF是为了求快；然后再对DIF进行均值处理，得到DEA又是为了求稳；最后，再通过对DIF和DEA的差值处理，再用2倍来计算，又是为了求快。这就相当于是均线差的均线差，进行了两次的求稳求快处理。所以相对于K线的杂乱无章，MACD的柱状线形态更加稳定，并且也不滞后。

这可能与大众的认知相悖，大多数投资者认为，MACD指标是非常滞后的，但这种观念，是来自于我们约定俗成的，金叉买入，死叉卖出这样的操作节点来判定的，而通过上面的讲解，我们知道MACD指标的终极产物，实际上是进行了两次求稳求快处理的柱状线，它是不滞后的。

![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_4.png)  

> 举个例子：

![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_5.png)  

如上图所示，当柱状线加长时，DIF也开始扩大，因为它更稳定，所以它还将持续扩大，同时说明12日、26日均线的距离也将持续扩大，两条均线呈现稳定的发散状态，但是26日要比12日均线慢，为了保持发散状态，就需要12日均线加速上行，它的加速上行，则代表了K线的上涨。这其实就是K线与指标的关系，K上涨，DIF扩大，柱状线加长。

反之，当柱状线缩短时，DIF也将开始缩小，并且因为它更稳定，所以它还将持续缩小，同时说明12日、26日均线的距离也将持续缩小，两条均线呈现稳定的收敛状态，但是26日要比12日均线慢，为了保持收敛状态，要么12日均线走平，这的意味K线盘整，等待26日均线追上来，要么12日均线拐头向下，这意味着K线下跌，主动迎接26日均线。这是K线与指标的两种关系，即背离：K线盘整，DIF缩小，柱状线缩短。或者同步：K线下跌，DIF缩小，柱状线缩短。

上面图中是一个K线的上涨图形，如果反过来是下跌图形，K线与指标的关系也是一样的。指示方向不同而已。当然这里要注意，所谓差离值DIF扩大缩小，是指的它与0轴的距离的绝对值，因为如果它们是在0轴下方，那么DIF的值是负值，它的数值会随着K线下跌越来越小，但距离0轴的距离越来越长。那么这时大家应该清楚了，我们在使用MACD时，经常会说，顶背离、底背离，上升同步和下跌同步等等这样的术语，它们出处就在这里了。

> 重点来了

我们了解了MACD的工作原理后，对我们最大的用处是什么呢？有这样一个战法叫做MK共振战法，利用的MACD与KDJ的共振进行买卖操作，这里面需要把MACD的参数在默认的基础上都选择一半即（6，13，5），就相当于是6日均线与13日均线的关系，当然战法不是关键，关键在于参数的设定上，它巧妙的利用了修改参数的方法，使MACD与KDJ可以形成共振，那么从另一方面说，如果我们已经预先设定好了均线的策略，比如当5日上穿20日均线时买入，下穿时卖出，那么我们就可以把MACD的参数设置为（5，20，X），这里的X暂时先不确定，需要后面慢慢在调整，我们来看一张图。

![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_6.png)  

在上图中，主图为5日和20日均线，副图MACD指标的参数为（5，20，5），MACD的买点要早于均线买点，MACD的卖点也同样早于均线卖点，假如在同等条件下，使用MACD进行买卖操作的话，要比使用均线更加灵敏，这就能够更早的捕捉机会和规避风险，那么现在你还觉得MACD指标滞后吗？我们再看一张图，这次是使用MACD的默认参数，均线也设置成12日和26日。

![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_7.png)  

这两幅图中，我们可以看到对于MACD的买卖点，好像并没有太多的变化，只是曲线更平滑了一些，但均线的买卖点，位置变化挺大的，这说明了什么呢？是的，MACD指标最终还是反映K线变化的，不论提取的哪两条举均线，其K线都是不变的，所以MACD的买卖点就不会有太大的变化。

##### 基本应用规则

> 当DIF和DEA上穿0轴时，市场由空翻多；当DIF和DEA下穿0轴时，市场由多翻空。

> 当DIF上穿DEA，发生金叉时，为买入信号；当DIF下穿DEA，发生死叉时，为卖出信号。

> MACD在0轴上方金叉，强烈买入信号；MACD在0轴上方死叉，短期回调信号；MACD在0轴下方死叉，强烈卖出信号；MACD在0轴下方金叉，短期反弹信号。



- 0轴的意义

0轴的概念，实际上是来自于柱状线，而柱状线的数值又来自于DIF和DEA差值，当DIF大于DEA时，柱状线为正值，所以显示为0轴上方的红柱，反之，当DIF小于DEA时，柱状线为负值，显示为0轴下方的绿柱，DIF金额DEA的交叉点，就是红绿柱状线在0轴上的变化点。

不过我们从推倒的顺序来看，DIF和DEA和0轴并没有直接的关系，但从行为上看，DIF和DEA是围绕着0轴来回上下波动的，这与股价围绕着股票的核心价值做上下来回波动的行为是一致的，但是股票的核心价值是不可见的，如果把它们进行类比，那么0轴就是股票的核心价值，这就是MACD指标的优势之一，正因如此，MACD指标以0轴为中心，把上下分为了强势区域和弱势区域。

如果DIF和DEA运行在0轴上方，说明当前股价是高于与核心价值的，所以该股票当前是以多头为主导的，即多头市场。反之，当DIF和DEA运行在0轴下方时，说明股价是低于其核心价值的，所以该股票当前是以空头为主导的，即空头市场。而当DIF和DEA穿越0轴的区域，正是市场中多空发生转换的区域。

在均线系统和MACD指标都使用默认参数的情况下，60日线均线，就被设定为股票的核心价值线，而DIF和DEA对应的就是5日和10日均线，60日均线上方为多头市场，下方则为空头市场，当`5日`和`10日`均线上穿`60日`均线时，就意味着市场由空翻多，反之亦然。这与我们之前的文章中提到的均线战法如出一辙。

![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_8.png)  

- DIF和DEA的交叉的意义

如果把0轴类比成股票的核心价值的话，那么DEA是DIF的移动平均线，DIF围绕DEA进行上下波动的这种行为又与K线围绕着其短期均线做上下波动的行为一致，我们还可以进行类比，当DIF上穿DEA，形成金叉时，说明K线突破了短期均线的压制，形成了短期的向上异动，反之DIF下穿DEA时，说明K线跌破了短期均线的支撑，形成了短期的向下异动。这个类比并不是凭空想象的，我们来看一张图。

![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_9.png)  

如上图所示，主图仍为12日和26日均线，副图为默认参数的MACD，我们可以看到当DIF与DEA交叉的区域，正是K线与12日均线突破压制或跌破支撑的区域，当然这是一片区域，并不是一个精确的点，我们知道，当K线针对于其短期均线发生异动时，我们应该进行买入卖出的操作。而如果均线使用默认参数的话，DIF与DEA交叉的区域也正好对应的是5日与10日这两个短期均线的交叉区域。5日与10日均线交叉，也是我们应该进行买入卖出操作的位置。


- 交叉与0轴的关系

根据上面2个应用法则，可能会出现4种情况：

当DIF与DEA在0轴上方发生金叉时，也就是说K线在多头市场中突破了短期均线，可以视为强烈的买入信号，投资者应该积极参与做多。

当DIF与DEA在0轴上方发生死叉时，也就是说K线在多头市场中跌破了短期均线，可以视为短期卖出信号，投资者可适当减仓观望，只要DIF与DEA没有向下跌破0轴，那说明这只是一个短暂的回调，并不是趋势发生反转。

当DIF与DEA在0轴下方发生死叉时，也就是说K线在空头市场中跌破了短期均线，可以视为强烈的卖出信号，投资者应该迅速止损离场。

当DIF与DEA在0轴下方发生金叉时，也就是说K线在空头市场中突破了短期均线，可以视为短期买入信号，投资者可适当建仓观望，只要DIF与DEA没有向上突破0轴，那说明这只是一次短暂的反弹，并不是趋势发生了反转。

![image](img/Z笔记附件/2022-05-15-MACD指标实战应用-工作原理_image_10.png)  

- 柱状线的意义

柱状线是MACD的终极产物，但实际上柱状线的数值大小是毫无意义的，但它的长短变化却有着非常大的参考价值，我们在上面把0轴、DIF和DEA都进行了类比，柱状线也同样可以进行类比，我们可以把它视为多空双方的能量或者力道。

不论是在多头市场还是空头市场，多空双方的较量是在一刻不停地进行着的，每一笔交易都是多空双方在见招拆招，每一根K线的形成都是那一时刻多空双方较量的结果，而柱状线就代表了，那一根K线所蕴含的能量信息。但单根K线只能代表此时此刻，却不能代表总体，所以单根柱状线也无法判断总体的多空能量对比。那么想要了解一段时期的多空能量对比，就必须要对柱状线的变化进行连续的观察。

当红色柱状线逐渐缩短时，说明多方能量正在逐步衰弱，虽然此时空方还没有占据主导地位，但如果照此发展，此消彼长下，空方能量迟早会超过多方能量，K线即将向下运行，那么此时，投资者应战略性撤退，高抛出局后再观望。它的缺点是：经常会出现伪信号，红色柱状线又一次焕发生机而加长，市场再度进入强势行情，此时投资者可以在突破前高时再次买入，但也可不再参与，这要根据自身的风险偏好和实际情况决定。反之如果绿色柱状线逐渐缩短时，也代表了空方能量逐步衰弱，K线即将向上运行，那么此时，投资者应采取低吸策略，逐步建仓。当然，它的缺点也是经常会出现伪信号，绿色柱状线再度加长，市场重新进入下跌行情，此时投资者应采取破前低止损的策略。



















